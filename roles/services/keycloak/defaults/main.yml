---
app_path: /docker/keycloak
images_list:
  - postgres:alpine
  - jboss/keycloak:latest

app_host: sso.licey1799.ru
app_url: https://{{ app_host }}/auth

keycloak_postgres_db: keycloak
keycloak_postgres_user: keycloak
keycloak_postgres_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62343038666431643764646139343964373062343331636637343065363430663737333864363437
          6564376265346262313434653264633837326635336162300a363366613030303131653666346638
          64303166346435623365356238393765353539663664306538666239306539653839626363343235
          3861313838326135330a353637363861356661383330653836376330666435323831303362333933
          3037

keycloak_db_vendor: postgres
keycloak_db_addr: keycloak-db
keycloak_db_database: "{{ keycloak_postgres_db }}"
keycloak_db_user: "{{ keycloak_postgres_user }}"
keycloak_db_password: "{{ keycloak_postgres_password }}"

keycloak_user: admin
keycloak_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35346539373738373065306430666330323130643030323836316534313334316538386137356539
          3865316534623231333136386566616633386432653762370a336638376561316636343334643237
          31313334633937633535366632373130616637333061353934363364646566623639666639623836
          3536383262326230390a613461303331393461666165333939613565353636353466353162326664
          61333431353730623739316634613931663364303936336535633965336638363436

keycloak_realm_name: school
keycloak_realm_display_name: Школа № 1799. Единый вход

keycloak_smtp_host: smtp.office365.com
keycloak_smtp_port: 587
keycloak_smtp_username: noreply@licey1799.ru
keycloak_smtp_password: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63643462343838306139363864613238323539346364666231333733363938393033313630386233
          3836333466336636346561633431383566616366316466350a333365653762353133323165393465
          36383866323733653831343235376462383563303139313032376134316136646132613661396134
          3733356464643164380a626438623061366538323265333666343366313938356637616461306133
          66626134316237643162633233663734393934646336613763643166363234633363
keycloak_smtp_starttls: true

keycloak_domain: cao.obr.mos.ru
keycloak_ldap_server: ldap://{{ keycloak_domain }}
keycloak_ldap_base_dn: OU=SCH-1799,OU=Schools,DC=cao,DC=obr,DC=mos,DC=ru
keycloak_ldap_bind_dn: CN=u-1799-svc,OU=Teachers,{{ keycloak_ldap_base_dn }}
keycloak_ldap_bind_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          36373032373462643935323737373061653264613161666663363639623737363534613164653637
          6432643333373164613261306638623665313231343936610a643162306665343730656531633433
          37636431383133386662346463663130366266613763393135353966323766623861636464363639
          6236623661666134620a353135366365303366633135633036653337393461396563633762366533
          63636261343332303336653633313738323933653635333735366362623439373830
keycloak_ldap_filter: (memberOf:1.2.840.113556.1.4.1941:=CN=1799-Svc-Keycloak-Users,OU=Groups,{{ keycloak_ldap_base_dn }})
keycloak_ldap_groups_dn: OU=Groups,{{ keycloak_ldap_base_dn }}

keycloak_ldap_kerberos_realm: "{{ keycloak_domain | upper }}"
keycloak_ldap_kerberos_keytab: /etc/krb5.keytab
keycloak_ldap_kerberos_spn: HTTP/{{ app_host }}@{{ keycloak_ldap_kerberos_realm }}

keycloak_office365_alias: office365-licey1799
keycloak_office365_displayname: Office 365 (licey1799.ru)
keycloak_office365_directory_id: 830e5e22-954a-4ce8-9451-115a1b6fdbcf
keycloak_office365_client_id: f7347570-736e-46a5-8d84-8306c01943f5
keycloak_office365_client_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34653230653963373431613133326364373561346266623166613565636437616130336138336464
          3963373135356630316364633135383331313638663332630a613137346233626365653338303864
          61363162376662343839346538633466333338353865393837613066396366393461623734383232
          3764663836396131650a656366343831366330336336376630376264373830643461343239303936
          36376136323461343666613437326234376436386638643334313137386430663665326336623631
          6262666161376464643239663465636231643461626437656263
