# Роль Ansible: GLPI

Роль Ansible, которая разворачивает GLPI в контейнерах Docker.

## Зависимости

Нет

## Новая установка GLPI

1. Проверить наличие новых версий GLPI и плагинов и актуализировать ссылки в файле `roles/svc/glpi/defaults/main.yml`
1. Задать свои значения для переменных в файле `roles/svc/glpi/defaults/main.yml`
1. Проверить и при необходимости настроить `roles/svc/glpi/templates/vhost.conf.j2`
1. Запустить плейбук

## Обновление версии GLPI

### Подготовка

1. Проверить все установленные плагины на совместимость с новой версией GLPI
1. Указать новую версию GLPI и ссылки на плагины в файле `roles/svc/glpi/defaults/main.yml`
1. Проверить список изменений новой версии и автоматизировать их в тасках, если необходимо
1. Протестировать установку обновления и изменений новой версии на клонированной ВМ

### Выполнение

1. Проверить наличие актуальной резервной копии ВМ
1. Сделать снапшот ВМ
1. В интерфейсе GLPI включить режим обслуживания (Настройки -> Общий -> Система)
1. Запустить обновление командой `ansible-playbook main.yml -k -t glpi -v`
1. В интерфейсе GLPI отключить режим обслуживания (Настройки -> Общий -> Система)
1. Проверить логи на наличие ошибок в папке `/docker/glpi/data/app/glpi/files/_log`
